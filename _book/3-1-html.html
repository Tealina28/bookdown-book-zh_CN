<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="3.1 HTML | Bookdown: 使用 R Markdown 创作书籍和技术文档" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://bookdown.org/yihui/bookdown/" />
<meta property="og:image" content="https://bookdown.org/yihui/bookdown//images/cover.jpg" />
<meta property="og:description" content="这是一本使用 R Markdown 编写书籍的指南，包括如何生成图片和表格，以及如何在 R Markdown 中插入交叉引用、引文、HTML 组件和 Shiny 应用。本书能够导出为 HTML、PDF 和电子书（例如 EPUB）。本书的风格是可以定制的。你可以在 RStudio IDE 或其它编辑器中轻松地编辑和预览本书，并在你想要的任何地方（例如 bookdown.org）托管本书。" />
<meta name="github-repo" content="rstudio/bookdown" />

<meta name="author" content="谢益辉" />

<meta name="date" content="2021-07-14" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="这是一本使用 R Markdown 编写书籍的指南，包括如何生成图片和表格，以及如何在 R Markdown 中插入交叉引用、引文、HTML 组件和 Shiny 应用。本书能够导出为 HTML、PDF 和电子书（例如 EPUB）。本书的风格是可以定制的。你可以在 RStudio IDE 或其它编辑器中轻松地编辑和预览本书，并在你想要的任何地方（例如 bookdown.org）托管本书。">

<title>3.1 HTML | Bookdown: 使用 R Markdown 创作书籍和技术文档</title>

<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<script src="libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation/tabsets.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding/datatables.js"></script>
<link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#翻译与排版说明">翻译与排版说明</a>
<ul>
<li><a href="翻译说明.html#翻译说明">翻译说明</a></li>
<li><a href="排版说明.html#排版说明">排版说明</a></li>
<li><a href="翻译进度.html#翻译进度">翻译进度</a></li>
</ul></li>
<li><a href="前言.html#前言">前言</a>
<ul>
<li><a href="为什么要阅读这本书.html#为什么要阅读这本书">为什么要阅读这本书</a></li>
<li><a href="本书的结构.html#本书的结构">本书的结构</a></li>
<li><a href="软件信息与一些约定.html#软件信息与一些约定">软件信息与一些约定</a></li>
<li><a href="致谢.html#致谢">致谢</a></li>
</ul></li>
<li><a href="关于作者.html#关于作者">关于作者</a></li>
<li><a href="1-introduction.html#introduction"><span class="toc-section-number">1</span> 简介</a>
<ul>
<li><a href="1-1-开发动机.html#开发动机"><span class="toc-section-number">1.1</span> 开发动机</a></li>
<li><a href="1-2-开始.html#开始"><span class="toc-section-number">1.2</span> 开始</a></li>
<li><a href="1-3-usage.html#usage"><span class="toc-section-number">1.3</span> 使用方法</a></li>
<li><a href="1-4-new-session.html#new-session"><span class="toc-section-number">1.4</span> 两种呈现方法</a></li>
<li><a href="1-5-一些提示.html#一些提示"><span class="toc-section-number">1.5</span> 一些提示</a></li>
</ul></li>
<li><a href="2-components.html#components"><span class="toc-section-number">2</span> 组成部分</a>
<ul>
<li><a href="2-1-markdown-syntax.html#markdown-syntax"><span class="toc-section-number">2.1</span> Markdown 语法</a>
<ul>
<li><a href="2-1-markdown-syntax.html#内联格式"><span class="toc-section-number">2.1.1</span> 内联格式</a></li>
<li><a href="2-1-markdown-syntax.html#块级元素"><span class="toc-section-number">2.1.2</span> 块级元素</a></li>
<li><a href="2-1-markdown-syntax.html#数学表达式"><span class="toc-section-number">2.1.3</span> 数学表达式</a></li>
</ul></li>
<li><a href="2-2-bookdown-提供的-markdown-功能拓展.html#bookdown-提供的-markdown-功能拓展"><span class="toc-section-number">2.2</span> bookdown 提供的 Markdown 功能拓展</a>
<ul>
<li><a href="2-2-bookdown-提供的-markdown-功能拓展.html#equations"><span class="toc-section-number">2.2.1</span> 方程编号与引用</a></li>
<li><a href="2-2-bookdown-提供的-markdown-功能拓展.html#theorems"><span class="toc-section-number">2.2.2</span> 定理与证明</a></li>
<li><a href="2-2-bookdown-提供的-markdown-功能拓展.html#special-headers"><span class="toc-section-number">2.2.3</span> Special headers</a></li>
<li><a href="2-2-bookdown-提供的-markdown-功能拓展.html#文本引用"><span class="toc-section-number">2.2.4</span> 文本引用</a></li>
</ul></li>
<li><a href="2-3-r-代码.html#r-代码"><span class="toc-section-number">2.3</span> R 代码</a></li>
<li><a href="2-4-figures.html#figures"><span class="toc-section-number">2.4</span> Figures</a></li>
<li><a href="2-5-tables.html#tables"><span class="toc-section-number">2.5</span> Tables</a></li>
<li><a href="2-6-cross-references.html#cross-references"><span class="toc-section-number">2.6</span> Cross-references</a></li>
<li><a href="2-7-custom-blocks.html#custom-blocks"><span class="toc-section-number">2.7</span> Custom blocks</a></li>
<li><a href="2-8-citations.html#citations"><span class="toc-section-number">2.8</span> 引文</a></li>
<li><a href="2-9-latex-index.html#latex-index"><span class="toc-section-number">2.9</span> 索引</a></li>
<li><a href="2-10-html-小组件.html#html-小组件"><span class="toc-section-number">2.10</span> HTML 小组件</a></li>
<li><a href="2-11-web-页面和-shiny-应用.html#web-页面和-shiny-应用"><span class="toc-section-number">2.11</span> Web 页面和 Shiny 应用</a></li>
</ul></li>
<li><a href="3-output-formats.html#output-formats"><span class="toc-section-number">3</span> 输出格式</a>
<ul>
<li><a href="3-1-html.html#html"><span class="toc-section-number">3.1</span> HTML</a>
<ul>
<li><a href="3-1-html.html#gitbook-style"><span class="toc-section-number">3.1.1</span> GitBook 样式</a></li>
<li><a href="3-1-html.html#bootstrap-样式"><span class="toc-section-number">3.1.2</span> Bootstrap 样式</a></li>
<li><a href="3-1-html.html#tufte-样式"><span class="toc-section-number">3.1.3</span> Tufte 样式</a></li>
</ul></li>
<li><a href="3-2-latexpdf.html#latexpdf"><span class="toc-section-number">3.2</span> LaTeX/PDF</a></li>
<li><a href="3-3-电子书.html#电子书"><span class="toc-section-number">3.3</span> 电子书</a>
<ul>
<li><a href="3-3-电子书.html#epub"><span class="toc-section-number">3.3.1</span> EPUB</a></li>
<li><a href="3-3-电子书.html#mobi"><span class="toc-section-number">3.3.2</span> MOBI</a></li>
</ul></li>
<li><a href="3-4-a-single-document.html#a-single-document"><span class="toc-section-number">3.4</span> 单个文档</a></li>
</ul></li>
<li><a href="4-customization.html#customization"><span class="toc-section-number">4</span> 定制化</a>
<ul>
<li><a href="4-1-yaml-options.html#yaml-options"><span class="toc-section-number">4.1</span> YAML 选项</a></li>
<li><a href="4-2-更换主题.html#更换主题"><span class="toc-section-number">4.2</span> 更换主题</a></li>
<li><a href="4-3-模板.html#模板"><span class="toc-section-number">4.3</span> 模板</a></li>
<li><a href="4-4-configuration.html#configuration"><span class="toc-section-number">4.4</span> 配置</a></li>
<li><a href="4-5-国际化.html#国际化"><span class="toc-section-number">4.5</span> 国际化</a></li>
</ul></li>
<li><a href="5-editing.html#editing"><span class="toc-section-number">5</span> 编辑</a>
<ul>
<li><a href="5-1-构建书籍.html#构建书籍"><span class="toc-section-number">5.1</span> 构建书籍</a></li>
<li><a href="5-2-预览单个章节.html#预览单个章节"><span class="toc-section-number">5.2</span> 预览单个章节</a></li>
<li><a href="5-3-使用-http-服务预览书籍.html#使用-http-服务预览书籍"><span class="toc-section-number">5.3</span> 使用 HTTP 服务预览书籍</a></li>
<li><a href="5-4-rstudio-ide.html#rstudio-ide"><span class="toc-section-number">5.4</span> RStudio IDE</a></li>
<li><a href="5-5-协同工作.html#协同工作"><span class="toc-section-number">5.5</span> 协同工作</a></li>
</ul></li>
<li><a href="6-publishing.html#publishing"><span class="toc-section-number">6</span> 发布与出版</a>
<ul>
<li><a href="6-1-rstudio-connect.html#rstudio-connect"><span class="toc-section-number">6.1</span> RStudio Connect</a></li>
<li><a href="6-2-github.html#github"><span class="toc-section-number">6.2</span> GitHub</a></li>
<li><a href="6-3-出版商.html#出版商"><span class="toc-section-number">6.3</span> 出版商</a></li>
</ul></li>
<li class="appendix"><span><b>附录</b></span></li>
<li><a href="A-software-tools.html#software-tools"><span class="toc-section-number">A</span> 软件工具</a>
<ul>
<li><a href="A-1-r-和-r-软件包.html#r-和-r-软件包"><span class="toc-section-number">A.1</span> R 和 R 软件包</a></li>
<li><a href="A-2-pandoc.html#pandoc"><span class="toc-section-number">A.2</span> Pandoc</a></li>
<li><a href="A-3-latex.html#latex"><span class="toc-section-number">A.3</span> LaTeX</a></li>
</ul></li>
<li><a href="B-software-usage.html#software-usage"><span class="toc-section-number">B</span> 软件使用</a>
<ul>
<li><a href="B-1-knitr.html#knitr"><span class="toc-section-number">B.1</span> knitr</a></li>
<li><a href="B-2-r-markdown.html#r-markdown"><span class="toc-section-number">B.2</span> R Markdown</a></li>
</ul></li>
<li><a href="C-常见问题.html#常见问题"><span class="toc-section-number">C</span> 常见问题</a></li>
<li><a href="参考文献.html#参考文献">参考文献</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="html" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> HTML</h2>
<p>The main difference between rendering a book (using <strong>bookdown</strong>) with rendering a single R Markdown document (using <strong>rmarkdown</strong>) to HTML is that a book will generate multiple HTML pages by default — normally one HTML file per chapter. This makes it easier to bookmark a certain chapter or share its URL with others as you read the book, and faster to load a book into the web browser. Currently we have provided a number of different styles for HTML output: the GitBook style, the Bootstrap style, and the Tufte style.</p>
<div id="gitbook-style" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> GitBook 样式</h3>
<p>The GitBook style was borrowed from GitBook, a project launched by Friendcode, Inc. (<a href="https://www.gitbook.com" class="uri">https://www.gitbook.com</a>) and dedicated to helping authors write books with Markdown. It provides a beautiful style, with a layout consisting of a sidebar showing the table of contents on the left, and the main body of a book on the right. The design is responsive to the window size, e.g., the navigation buttons are displayed on the left/right of the book body when the window is wide enough, and collapsed into the bottom when the window is narrow to give readers more horizontal space to read the book body.</p>
<p>We have made several improvements over the original GitBook project. The most significant one is that we replaced the Markdown engine with R Markdown v2 based on Pandoc, so that there are a lot more features for you to use when writing a book:</p>
<ul>
<li>You can embed R code chunks and inline R expressions in Markdown, and this makes it easy to create reproducible documents and frees you from synchronizing your computation with its actual output (<strong>knitr</strong> will take care of it automatically).</li>
<li>The Markdown syntax is much richer: you can write anything that Pandoc’s Markdown supports, such as LaTeX math expressions and citations.</li>
<li>You can embed interactive content in the book (for HTML output only), such as HTML widgets and Shiny apps.</li>
</ul>
<p>We have also added some useful features in the user interface that we will introduce in detail soon. The output format function for the GitBook style in <strong>bookdown</strong> is <code>gitbook()</code>. Here are its arguments:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="3-1-html.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gitbook</span>(<span class="at">fig_caption =</span> <span class="cn">TRUE</span>, <span class="at">number_sections =</span> <span class="cn">TRUE</span>,</span>
<span id="cb71-2"><a href="3-1-html.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">self_contained =</span> <span class="cn">FALSE</span>, <span class="at">anchor_sections =</span> <span class="cn">TRUE</span>,</span>
<span id="cb71-3"><a href="3-1-html.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lib_dir =</span> <span class="st">&quot;libs&quot;</span>, <span class="at">pandoc_args =</span> <span class="cn">NULL</span>, ...,</span>
<span id="cb71-4"><a href="3-1-html.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">template =</span> <span class="st">&quot;default&quot;</span>,</span>
<span id="cb71-5"><a href="3-1-html.html#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="fu">c</span>(<span class="st">&quot;chapter&quot;</span>, <span class="st">&quot;chapter+number&quot;</span>, <span class="st">&quot;section&quot;</span>, <span class="st">&quot;section+number&quot;</span>, <span class="st">&quot;rmd&quot;</span>, <span class="st">&quot;none&quot;</span>),</span>
<span id="cb71-6"><a href="3-1-html.html#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_bib =</span> <span class="cn">TRUE</span>, <span class="at">config =</span> <span class="fu">list</span>(), <span class="at">table_css =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Most arguments are passed to <code>rmarkdown::html_document()</code>, including <code>fig_caption</code>, <code>lib_dir</code>, and <code>...</code>. You can check out the help page of <code>rmarkdown::html_document()</code> for the full list of possible options. We strongly recommend you to use <code>fig_caption = TRUE</code> for two reasons: 1) it is important to explain your figures with captions; 2) enabling figure captions means figures will be placed in floating environments when the output is LaTeX, otherwise you may end up with a lot of white space on certain pages. The format of figure/table numbers depends on if sections are numbered or not: if <code>number_sections = TRUE</code>, these numbers will be of the format <code>X.i</code>, where <code>X</code> is the chapter number, and <code>i</code> in an incremental number; if sections are not numbered, all figures/tables will be numbered sequentially through the book from 1, 2, …, N. Note that in either case, figures and tables will be numbered independently.</p>
<p>Among all possible arguments in <code>...</code>, you are most likely to use the <code>css</code> argument to provide one or more custom CSS files to tweak the default CSS style. There are a few arguments of <code>html_document()</code> that have been hard-coded in <code>gitbook()</code> and you cannot change them: <code>toc = TRUE</code> (there must be a table of contents), <code>theme = NULL</code> (not using any Bootstrap themes), and <code>template</code> (there exists an internal GitBook template).</p>
<p>Please note that if you change <code>self_contained = TRUE</code> to make self-contained HTML pages, the total size of all HTML files can be significantly increased since there are many JS and CSS files that have to be embedded in every single HTML file.</p>
<p>Besides these <code>html_document()</code> options, <code>gitbook()</code> has three other arguments: <code>split_by</code>, <code>split_bib</code>, and <code>config</code>. The <code>split_by</code> argument specifies how you want to split the HTML output into multiple pages, and its possible values are:</p>
<ul>
<li><code>rmd</code>: use the base filenames of the input Rmd files to create the HTML filenames, e.g., generate <code>chapter3.html</code> for <code>chapter3.Rmd</code>.</li>
<li><code>none</code>: do not split the HTML file (the book will be a single HTML file).</li>
<li><code>chapter</code>: split the file by the first-level headers.</li>
<li><code>section</code>: split the file by the second-level headers.</li>
<li><code>chapter+number</code> and <code>section+number</code>: similar to <code>chapter</code> and <code>section</code>, but the files will be numbered.</li>
</ul>
<p>For <code>chapter</code> and <code>section</code>, the HTML filenames will be determined by the header identifiers, e.g., the filename for the first chapter with a chapter title <code># Introduction</code> will be <code>introduction.html</code> by default. For <code>chapter+number</code> and <code>section+number</code>, the chapter/section numbers will be prepended to the HTML filenames, e.g., <code>1-introduction.html</code> and <code>2-1-literature.html</code>. The header identifier is automatically generated from the header text by default,<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a> and you can manually specify an identifier using the syntax <code>{#your-custom-id}</code> after the header text, e.g.,</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb72-1"><a href="3-1-html.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># An Introduction {#introduction}</span></span>
<span id="cb72-2"><a href="3-1-html.html#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="3-1-html.html#cb72-3" aria-hidden="true" tabindex="-1"></a>The default identifier is <span class="in">`an-introduction`</span> but we changed</span>
<span id="cb72-4"><a href="3-1-html.html#cb72-4" aria-hidden="true" tabindex="-1"></a>it to <span class="in">`introduction`</span>.</span></code></pre></div>
<p>By default, the bibliography is split and relevant citation items are put at the bottom of each page, so that readers do not have to navigate to a different bibliography page to see the details of citations. This feature can be disabled using <code>split_bib = FALSE</code>, in which case all citations are put on a separate page.</p>
<p>There are several sub-options in the <code>config</code> option for you to tweak some details in the user interface. Recall that all output format options (not only for <code>bookdown::gitbook</code>) can be either passed to the format function if you use the command-line interface <code>bookdown::render_book()</code>, or written in the YAML metadata. We display the default sub-options of <code>config</code> in the <code>gitbook</code> format as YAML metadata below (note that they are indented under the <code>config</code> option):</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb73-1"><a href="3-1-html.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="at">bookdown:</span><span class="fu">:gitbook</span><span class="kw">:</span></span>
<span id="cb73-2"><a href="3-1-html.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">config</span><span class="kw">:</span></span>
<span id="cb73-3"><a href="3-1-html.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span></span>
<span id="cb73-4"><a href="3-1-html.html#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">collapse</span><span class="kw">:</span><span class="at"> subsection</span></span>
<span id="cb73-5"><a href="3-1-html.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">scroll_highlight</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb73-6"><a href="3-1-html.html#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">before</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb73-7"><a href="3-1-html.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">after</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb73-8"><a href="3-1-html.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toolbar</span><span class="kw">:</span></span>
<span id="cb73-9"><a href="3-1-html.html#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">position</span><span class="kw">:</span><span class="at"> fixed</span></span>
<span id="cb73-10"><a href="3-1-html.html#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">edit </span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb73-11"><a href="3-1-html.html#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">download</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb73-12"><a href="3-1-html.html#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">search</span><span class="kw">:</span></span>
<span id="cb73-13"><a href="3-1-html.html#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">engine</span><span class="kw">:</span><span class="at"> lunr</span><span class="co"> # or fuse</span></span>
<span id="cb73-14"><a href="3-1-html.html#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="co">      # options to control/tune search engine behaviour (for</span></span>
<span id="cb73-15"><a href="3-1-html.html#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="co">      # fuse.js, refer to https://fusejs.io/api/options.html)</span></span>
<span id="cb73-16"><a href="3-1-html.html#cb73-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">options</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb73-17"><a href="3-1-html.html#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fontsettings</span><span class="kw">:</span></span>
<span id="cb73-18"><a href="3-1-html.html#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> white</span></span>
<span id="cb73-19"><a href="3-1-html.html#cb73-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">family</span><span class="kw">:</span><span class="at"> sans</span></span>
<span id="cb73-20"><a href="3-1-html.html#cb73-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">size</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb73-21"><a href="3-1-html.html#cb73-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">sharing</span><span class="kw">:</span></span>
<span id="cb73-22"><a href="3-1-html.html#cb73-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">facebook</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb73-23"><a href="3-1-html.html#cb73-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">github</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb73-24"><a href="3-1-html.html#cb73-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">twitter</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb73-25"><a href="3-1-html.html#cb73-25" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">linkedin</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb73-26"><a href="3-1-html.html#cb73-26" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">weibo</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb73-27"><a href="3-1-html.html#cb73-27" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">instapaper</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb73-28"><a href="3-1-html.html#cb73-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">vk</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb73-29"><a href="3-1-html.html#cb73-29" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">whatsapp</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb73-30"><a href="3-1-html.html#cb73-30" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">all</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&#39;facebook&#39;</span><span class="kw">,</span><span class="at"> </span><span class="st">&#39;twitter&#39;</span><span class="kw">,</span><span class="at"> </span><span class="st">&#39;linkedin&#39;</span><span class="kw">,</span><span class="at"> </span><span class="st">&#39;weibo&#39;</span><span class="kw">,</span><span class="at"> </span><span class="st">&#39;instapaper&#39;</span><span class="kw">]</span></span>
<span id="cb73-31"><a href="3-1-html.html#cb73-31" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">info</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span></code></pre></div>
<p>The <code>toc</code> option controls the behavior of the table of contents (TOC). You can collapse some items initially when a page is loaded via the <code>collapse</code> option. Its possible values are <code>subsection</code>, <code>section</code>, <code>none</code> (or <code>null</code>). This option can be helpful if your TOC is very long and has more than three levels of headings: <code>subsection</code> means collapsing all TOC items for subsections (X.X.X), <code>section</code> means those items for sections (X.X) so only the top-level headings are displayed initially, and <code>none</code> means not collapsing any items in the TOC. For those collapsed TOC items, you can toggle their visibility by clicking their parent TOC items. For example, you can click a chapter title in the TOC to show/hide its sections.</p>
<p>The <code>scroll_highlight</code> option in <code>toc</code> indicates whether to enable highlighting of TOC items as you scroll the book body (by default this feature is enabled). Whenever a new header comes into the current viewport as you scroll down/up, the corresponding item in TOC on the left will be highlighted.</p>
<p>Since the sidebar has a fixed width, when an item in the TOC is truncated because the heading text is too wide, you can hover the cursor over it to see a tooltip showing the full text.</p>
<p>You may add more items before and after the TOC using the HTML tag <code>&lt;li&gt;</code>. These items will be separated from the TOC using a horizontal divider. You can use the pipe character <code>|</code> so that you do not need to escape any characters in these items following the YAML syntax, e.g.,</p>
<pre><code>    toc:
      before: |
        &lt;li&gt;&lt;a href=&quot;...&quot;&gt;My Awesome Book&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;...&quot;&gt;John Smith&lt;/a&gt;&lt;/li&gt;
      after: |
        &lt;li&gt;&lt;a href=&quot;https://github.com/rstudio/bookdown&quot;&gt;
        Proudly published with bookdown&lt;/a&gt;&lt;/li&gt;</code></pre>
<p>As you navigate through different HTML pages, we will try to preserve the scroll position of the TOC. Normally you will see the scrollbar in the TOC at a fixed position even if you navigate to the next page. However, if the TOC item for the current chapter/section is not visible when the page is loaded, we will automatically scroll the TOC to make it visible to you.</p>
<div class="figure"><span id="fig:gitbook-toolbar"></span>
<img src="images/gitbook.png" alt="The GitBook toolbar." width="100%" />
<p class="caption">
图 3.1: The GitBook toolbar.
</p>
</div>
<p>The GitBook style has a toolbar (Figure <a href="3-1-html.html#fig:gitbook-toolbar">3.1</a>) at the top of each page that allows you to dynamically change the book settings. The <code>toolbar</code> option has a sub-option <code>position</code>, which can take values <code>fixed</code> or <code>static</code>. The default is that the toolbar will be fixed at the top of the page, so even if you scroll down the page, the toolbar is still visible there. If it is <code>static</code>, the toolbar will not scroll with the page, i.e., once you scroll away, you will no longer see it.</p>
<p>The first button on the toolbar can toggle the visibility of the sidebar. You can also hit the <code>S</code> key on your keyboard to do the same thing. The GitBook style can remember the visibility status of the sidebar, e.g., if you closed the sidebar, it will remain closed the next time you open the book. In fact, the GitBook style remembers many other settings as well, such as the search keyword and the font settings.</p>
<p>The second button on the toolbar is the search button. Its keyboard shortcut is <code>F</code> (Find). When the button is clicked, you will see a search box at the top of the sidebar. As you type in the box, the TOC will be filtered to display the sections that match the search keyword. Now you can use the arrow keys <code>Up</code>/<code>Down</code> to highlight the previous/next match in the search results. When you click the search button again (or hit <code>F</code> outside the search box), the search keyword will be emptied and the search box will be hidden. To disable searching, set the option <code>search: no</code> in <code>config</code>.</p>
<p>The third button is for font/theme settings. The reader can change the font size (bigger or smaller), the font family (serif or sans serif), and the theme (<code>White</code>, <code>Sepia</code>, or <code>Night</code>). You can set the initial value of these settings via the <code>fontsettings</code> option. Font size is measured on a scale of 0-4; the initial value can be set to 1, 2 (default), 3, or 4. The button can be removed from the toolbar by setting <code>fontsettings: null</code> (or <code>no</code>).</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb75-1"><a href="3-1-html.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># changing the default</span></span>
<span id="cb75-2"><a href="3-1-html.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fontsettings</span><span class="kw">:</span></span>
<span id="cb75-3"><a href="3-1-html.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> night</span></span>
<span id="cb75-4"><a href="3-1-html.html#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">family</span><span class="kw">:</span><span class="at"> serif</span></span>
<span id="cb75-5"><a href="3-1-html.html#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">size</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span></code></pre></div>
<p>The <code>edit</code> option is the same as the option mentioned in Section <a href="4-4-configuration.html#configuration">4.4</a>. If it is not empty, an edit button will be added to the toolbar. This was designed for potential contributors to the book to contribute by editing the book on GitHub after clicking the button and sending pull requests. The <code>history</code> and <code>view</code> options work the same
way.</p>
<p>If your book has other output formats for readers to download, you may provide the <code>download</code> option so that a download button can be added to the toolbar. This option takes either a character vector, or a list of character vectors with the length of each vector being 2. When it is a character vector, it should be either a vector of filenames, or filename extensions, e.g., both of the following settings are okay:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb76-1"><a href="3-1-html.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">download</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;book.pdf&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;book.epub&quot;</span><span class="kw">]</span></span>
<span id="cb76-2"><a href="3-1-html.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">download</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;pdf&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;epub&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;mobi&quot;</span><span class="kw">]</span></span></code></pre></div>
<p>When you only provide the filename extensions, the filename is derived from the book filename of the configuration file <code>_bookdown.yml</code> (Section <a href="4-4-configuration.html#configuration">4.4</a>). When <code>download</code> is <code>null</code>, <code>gitbook()</code> will look for PDF, EPUB, and MOBI files in the book output directory, and automatically add them to the <code>download</code> option. If you just want to suppress the download button, use <code>download: no</code>. All files for readers to download will be displayed in a drop-down menu, and the filename extensions are used as the menu text. When the only available format for readers to download is PDF, the download button will be a single PDF button instead of a drop-down menu.</p>
<p>An alternative form for the value of the <code>download</code> option is a list of length-2 vectors, e.g.,</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb77-1"><a href="3-1-html.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">download</span><span class="kw">:</span><span class="at"> </span><span class="kw">[[</span><span class="st">&quot;book.pdf&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;PDF&quot;</span><span class="kw">],</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;book.epub&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;EPUB&quot;</span><span class="kw">]]</span></span></code></pre></div>
<p>You can also write it as:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb78-1"><a href="3-1-html.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">download</span><span class="kw">:</span></span>
<span id="cb78-2"><a href="3-1-html.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;book.pdf&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;PDF&quot;</span><span class="kw">]</span></span>
<span id="cb78-3"><a href="3-1-html.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;book.epub&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;EPUB&quot;</span><span class="kw">]</span></span></code></pre></div>
<p>Each vector in the list consists of the filename and the text to be displayed in the menu. Compared to the first form, this form allows you to customize the menu text, e.g., you may have two different copies of the PDF for readers to download and you will need to make the menu items different.</p>
<p>On the right of the toolbar, there are some buttons to share the link on social network websites such as Twitter, Facebook, and Linkedin. You can use the <code>sharing</code> option to decide which buttons to enable. If you want to get rid of these buttons entirely, use <code>sharing: null</code> (or <code>no</code>).</p>
<p>Another button shown on the toolbar is the information (‘i’) button that lists keyboard shortcuts available to navigate the document. This button can be hidden by setting <code>info: no</code>.</p>
<p>Finally, there are a few more top-level options in the YAML metadata that can be passed to the GitBook HTML template via Pandoc. They may not have clear visible effects on the HTML output, but they may be useful when you deploy the HTML output as a website. These options include:</p>
<ul>
<li><code>description</code>: A character string to be written to the <code>content</code> attribute of the tag <code>&lt;meta name="description" content=""&gt;</code> in the HTML head (if missing, the title of the book will be used). This can be useful for search engine optimization (SEO). Note that it should be plain text without any Markdown formatting such as <code>_italic_</code> or <code>**bold**</code>.</li>
<li><code>url</code>: The URL of book’s website, e.g., <code>https\://bookdown.org/yihui/bookdown/</code>.<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></li>
<li><code>github-repo</code>: The GitHub repository of the book of the form <code>user/repo</code>.</li>
<li><code>cover-image</code>: The path to the cover image of the book.</li>
<li><code>apple-touch-icon</code>: A path to an icon (e.g., a PNG image). This is for iOS only: when the website is added to the Home screen, the link is represented by this icon.</li>
<li><code>apple-touch-icon-size</code>: The size of the icon (by default, 152 x 152 pixels).</li>
<li><code>favicon</code>: A path to the “favorite icon.” Typically this icon is displayed in the browser’s address bar, or in front of the page title on the tab if the browser support tabs.</li>
</ul>
<p>Below we show some sample YAML metadata (again, please note that these are <em>top-level</em> options):</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb79-1"><a href="3-1-html.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb79-2"><a href="3-1-html.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;An Awesome Book&quot;</span></span>
<span id="cb79-3"><a href="3-1-html.html#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;John Smith&quot;</span></span>
<span id="cb79-4"><a href="3-1-html.html#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;This book introduces the ABC theory, and ...&quot;</span></span>
<span id="cb79-5"><a href="3-1-html.html#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="fu">url</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;https\://bookdown.org/john/awesome/&#39;</span></span>
<span id="cb79-6"><a href="3-1-html.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="fu">github-repo</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;john/awesome&quot;</span></span>
<span id="cb79-7"><a href="3-1-html.html#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cover-image</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;images/cover.png&quot;</span></span>
<span id="cb79-8"><a href="3-1-html.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="fu">apple-touch-icon</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;touch-icon.png&quot;</span></span>
<span id="cb79-9"><a href="3-1-html.html#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="fu">apple-touch-icon-size</span><span class="kw">:</span><span class="at"> </span><span class="dv">120</span></span>
<span id="cb79-10"><a href="3-1-html.html#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="fu">favicon</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;favicon.ico&quot;</span></span>
<span id="cb79-11"><a href="3-1-html.html#cb79-11" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>A nice effect of setting <code>description</code> and <code>cover-image</code> is that when you share the link of your book on some social network websites such as Twitter, the link can be automatically expanded to a card with the cover image and description of the book.</p>
</div>
<div id="bootstrap-样式" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Bootstrap 样式</h3>
<p>If you have used R Markdown before, you should be familiar with the Bootstrap style (<a href="http://getbootstrap.com" class="uri">http://getbootstrap.com</a>), which is the default style of the HTML output of R Markdown. The output format function in <strong>rmarkdown</strong> is <code>html_document()</code>, and we have a corresponding format <code>html_book()</code> in <strong>bookdown</strong> using <code>html_document()</code> as the base format. In fact, there is a more general format <code>html_chapters()</code> in <strong>bookdown</strong> and <code>html_book()</code> is just its special case:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="3-1-html.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html_chapters</span>(<span class="at">toc =</span> <span class="cn">TRUE</span>, <span class="at">number_sections =</span> <span class="cn">TRUE</span>,</span>
<span id="cb80-2"><a href="3-1-html.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">fig_caption =</span> <span class="cn">TRUE</span>, <span class="at">lib_dir =</span> <span class="st">&quot;libs&quot;</span>,</span>
<span id="cb80-3"><a href="3-1-html.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">template =</span> <span class="fu">bookdown_file</span>(<span class="st">&quot;templates/default.html&quot;</span>),</span>
<span id="cb80-4"><a href="3-1-html.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pandoc_args =</span> <span class="cn">NULL</span>, ...,</span>
<span id="cb80-5"><a href="3-1-html.html#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">base_format =</span> rmarkdown<span class="sc">::</span>html_document,</span>
<span id="cb80-6"><a href="3-1-html.html#cb80-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_bib =</span> <span class="cn">TRUE</span>, <span class="at">page_builder =</span> build_chapter,</span>
<span id="cb80-7"><a href="3-1-html.html#cb80-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">split_by =</span> <span class="fu">c</span>(<span class="st">&quot;section+number&quot;</span>, <span class="st">&quot;section&quot;</span>, <span class="st">&quot;chapter+number&quot;</span>, <span class="st">&quot;chapter&quot;</span>, <span class="st">&quot;rmd&quot;</span>, <span class="st">&quot;none&quot;</span>))</span></code></pre></div>
<p>Note that it has a <code>base_format</code> argument that takes a base output format function, and <code>html_book()</code> is basically <code>html_chapters(base_format = rmarkdown::html_document)</code>. All arguments of <code>html_book()</code> are passed to <code>html_chapters()</code>:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="3-1-html.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html_book</span>(...)</span></code></pre></div>
<p>That means that you can use most arguments of <code>rmarkdown::html_document</code>, such as <code>toc</code> (whether to show the table of contents), <code>number_sections</code> (whether to number section headings), and so on. Again, check the help page of <code>rmarkdown::html_document</code> to see the full list of possible options. Note that the argument <code>self_contained</code> is hard-coded to <code>FALSE</code> internally, so you cannot change the value of this argument. We have explained the argument <code>split_by</code> in the previous section.</p>
<p>The arguments <code>template</code> and <code>page_builder</code> are for advanced users, and you do not need to understand them unless you have strong need to customize the HTML output, and those many options provided by <code>rmarkdown::html_document()</code> still do not give you what you want.</p>
<p>If you want to pass a different HTML template to the <code>template</code> argument, the template must contain three pairs of HTML comments, and each comment must be on a separate line:</p>
<ul>
<li><code>&lt;!--bookdown:title:start--&gt;</code> and <code>&lt;!--bookdown:title:end--&gt;</code> to mark the title section of the book. This section will be placed only on the first page of the rendered book;</li>
<li><code>&lt;!--bookdown:toc:start--&gt;</code> and <code>&lt;!--bookdown:toc:end--&gt;</code> to mark the table of contents section, which will be placed on all HTML pages;</li>
<li><code>&lt;!--bookdown:body:start--&gt;</code> and <code>&lt;!--bookdown:body:end--&gt;</code> to mark the HTML body of the book, and the HTML body will be split into multiple separate pages. Recall that we merge all R Markdown or Markdown files, render them into a single HTML file, and split it.</li>
</ul>
<p>You may open the default HTML template to see where these comments were inserted:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="3-1-html.html#cb82-1" aria-hidden="true" tabindex="-1"></a>bookdown<span class="sc">:::</span><span class="fu">bookdown_file</span>(<span class="st">&#39;templates/default.html&#39;</span>)</span>
<span id="cb82-2"><a href="3-1-html.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co"># you may use file.edit() to open this file</span></span></code></pre></div>
<p>Once you know how <strong>bookdown</strong> works internally to generate multiple-page HTML output, it will be easier to understand the argument <code>page_builder</code>, which is a function to compose each individual HTML page using the HTML fragments extracted from the above comment tokens. The default value of <code>page_builder</code> is a function <code>build_chapter</code> in <strong>bookdown</strong>, and its source code is relatively simple (ignore those internal functions like <code>button_link()</code>):</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="3-1-html.html#cb83-1" aria-hidden="true" tabindex="-1"></a>build_chapter <span class="ot">=</span> <span class="cf">function</span>(</span>
<span id="cb83-2"><a href="3-1-html.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  head, toc, chapter, link_prev, link_next, rmd_cur, html_cur, foot</span>
<span id="cb83-3"><a href="3-1-html.html#cb83-3" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb83-4"><a href="3-1-html.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a has-sub class to the &lt;li&gt; items that has sub lists</span></span>
<span id="cb83-5"><a href="3-1-html.html#cb83-5" aria-hidden="true" tabindex="-1"></a>  toc <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">&#39;^(&lt;li&gt;)(.+&lt;ul&gt;)$&#39;</span>, <span class="st">&#39;&lt;li class=&quot;has-sub&quot;&gt;</span><span class="sc">\\</span><span class="st">2&#39;</span>, toc)</span>
<span id="cb83-6"><a href="3-1-html.html#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb83-7"><a href="3-1-html.html#cb83-7" aria-hidden="true" tabindex="-1"></a>    head,</span>
<span id="cb83-8"><a href="3-1-html.html#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;div class=&quot;row&quot;&gt;&#39;</span>,</span>
<span id="cb83-9"><a href="3-1-html.html#cb83-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;div class=&quot;col-sm-12&quot;&gt;&#39;</span>,</span>
<span id="cb83-10"><a href="3-1-html.html#cb83-10" aria-hidden="true" tabindex="-1"></a>    toc,</span>
<span id="cb83-11"><a href="3-1-html.html#cb83-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;/div&gt;&#39;</span>,</span>
<span id="cb83-12"><a href="3-1-html.html#cb83-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;/div&gt;&#39;</span>,</span>
<span id="cb83-13"><a href="3-1-html.html#cb83-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;div class=&quot;row&quot;&gt;&#39;</span>,</span>
<span id="cb83-14"><a href="3-1-html.html#cb83-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;div class=&quot;col-sm-12&quot;&gt;&#39;</span>,</span>
<span id="cb83-15"><a href="3-1-html.html#cb83-15" aria-hidden="true" tabindex="-1"></a>    chapter,</span>
<span id="cb83-16"><a href="3-1-html.html#cb83-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;p style=&quot;text-align: center;&quot;&gt;&#39;</span>,</span>
<span id="cb83-17"><a href="3-1-html.html#cb83-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">button_link</span>(link_prev, <span class="st">&#39;Previous&#39;</span>),</span>
<span id="cb83-18"><a href="3-1-html.html#cb83-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source_link</span>(rmd_cur, <span class="at">type =</span> <span class="st">&#39;edit&#39;</span>),</span>
<span id="cb83-19"><a href="3-1-html.html#cb83-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source_link</span>(rmd_cur, <span class="at">type =</span> <span class="st">&#39;history&#39;</span>),</span>
<span id="cb83-20"><a href="3-1-html.html#cb83-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source_link</span>(rmd_cur, <span class="at">type =</span> <span class="st">&#39;view&#39;</span>),</span>
<span id="cb83-21"><a href="3-1-html.html#cb83-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">button_link</span>(link_next, <span class="st">&#39;Next&#39;</span>),</span>
<span id="cb83-22"><a href="3-1-html.html#cb83-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;/p&gt;&#39;</span>,</span>
<span id="cb83-23"><a href="3-1-html.html#cb83-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;/div&gt;&#39;</span>,</span>
<span id="cb83-24"><a href="3-1-html.html#cb83-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;&lt;/div&gt;&#39;</span>,</span>
<span id="cb83-25"><a href="3-1-html.html#cb83-25" aria-hidden="true" tabindex="-1"></a>    foot</span>
<span id="cb83-26"><a href="3-1-html.html#cb83-26" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">collapse =</span> <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)</span>
<span id="cb83-27"><a href="3-1-html.html#cb83-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Basically, this function takes a number of components like the HTML head, the table of contents, the chapter body, and so on, and it is expected to return a character string which is the HTML source of a complete HTML page. You may manipulate all components in this function using text-processing functions like <code>gsub()</code> and <code>paste()</code>.</p>
<p>What the default page builder does is to put TOC in the first row, the body in the second row, navigation buttons at the bottom of the body, and concatenate them with the HTML head and foot. Here is a sketch of the HTML source code that may help you understand the output of <code>build_chapter()</code>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb84-1"><a href="3-1-html.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb84-2"><a href="3-1-html.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb84-3"><a href="3-1-html.html#cb84-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;title&gt;</span>A Nice Book<span class="kw">&lt;/title&gt;</span></span>
<span id="cb84-4"><a href="3-1-html.html#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb84-5"><a href="3-1-html.html#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb84-6"><a href="3-1-html.html#cb84-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-7"><a href="3-1-html.html#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;row&quot;</span><span class="kw">&gt;</span>TOC<span class="kw">&lt;/div&gt;</span></span>
<span id="cb84-8"><a href="3-1-html.html#cb84-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb84-9"><a href="3-1-html.html#cb84-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;row&quot;</span><span class="kw">&gt;</span></span>
<span id="cb84-10"><a href="3-1-html.html#cb84-10" aria-hidden="true" tabindex="-1"></a>      CHAPTER BODY</span>
<span id="cb84-11"><a href="3-1-html.html#cb84-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;p&gt;</span></span>
<span id="cb84-12"><a href="3-1-html.html#cb84-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;button&gt;</span>PREVIOUS<span class="kw">&lt;/button&gt;</span></span>
<span id="cb84-13"><a href="3-1-html.html#cb84-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;button&gt;</span>NEXT<span class="kw">&lt;/button&gt;</span></span>
<span id="cb84-14"><a href="3-1-html.html#cb84-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;/p&gt;</span></span>
<span id="cb84-15"><a href="3-1-html.html#cb84-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb84-16"><a href="3-1-html.html#cb84-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-17"><a href="3-1-html.html#cb84-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb84-18"><a href="3-1-html.html#cb84-18" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>For all HTML pages, the main difference is the chapter body, and most of the rest of the elements are the same. The default output from <code>html_book()</code> will include the Bootstrap CSS and JavaScript files in the <code>&lt;head&gt;</code> tag.</p>
<p>The TOC is often used for navigation purposes. In the GitBook style, the TOC is displayed in the sidebar. For the Bootstrap style, we did not apply a special style to it, so it is shown as a plain unordered list (in the HTML tag <code>&lt;ul&gt;</code>). It is easy to turn this list into a navigation bar with some CSS techniques. We have provided a CSS file <code>toc.css</code> in this package that you can use, and you can find it here: <a href="https://github.com/rstudio/bookdown/blob/master/inst/examples/css/toc.css" class="uri">https://github.com/rstudio/bookdown/blob/master/inst/examples/css/toc.css</a></p>
<p>You may copy this file to the root directory of your book, and apply it to the HTML output via the <code>css</code> option, e.g.,</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb85-1"><a href="3-1-html.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb85-2"><a href="3-1-html.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb85-3"><a href="3-1-html.html#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="at">  bookdown:</span><span class="fu">:html_book</span><span class="kw">:</span></span>
<span id="cb85-4"><a href="3-1-html.html#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb85-5"><a href="3-1-html.html#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span><span class="at"> toc.css</span></span>
<span id="cb85-6"><a href="3-1-html.html#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>There are many possible ways to turn <code>&lt;ul&gt;</code> lists into navigation menus if you do a little bit searching on the web, and you can choose a menu style that you like. The <code>toc.css</code> we just mentioned is a style with white menu texts on a black background, and supports sub-menus (e.g., section titles are displayed as drop-down menus under chapter titles).</p>
<p>As a matter of fact, you can get rid of the Bootstrap style in <code>html_document()</code> if you set the <code>theme</code> option to <code>null</code>, and you are free to apply arbitrary styles to the HTML output using the <code>css</code> option (and possibly the <code>includes</code> option if you want to include arbitrary content in the HTML head/foot).</p>
</div>
<div id="tufte-样式" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Tufte 样式</h3>
<p>Like the Bootstrap style, the Tufte style is provided by an output format <code>tufte_html_book()</code>, which is also a special case of <code>html_chapters()</code> using <code>tufte::tufte_html()</code> as the base format. Please see the <strong>tufte</strong> package <span class="citation">(<a href="#ref-R-tufte" role="doc-biblioref">Xie and Allaire 2020</a>)</span> if you are not familiar with the Tufte style. Basically, it is a layout with a main column on the left and a margin column on the right. The main body is in the main column, and the margin column is used to place footnotes, margin notes, references, and margin figures, and so on.</p>
<p>All arguments of <code>tufte_html_book()</code> have exactly the same meanings as <code>html_book()</code>, e.g., you can also customize the CSS via the <code>css</code> option. There are a few elements that are specific to the Tufte style, though, such as margin notes, margin figures, and full-width figures. These elements require special syntax to generate; please see the documentation of the <strong>tufte</strong> package. Note that you do not need to do anything special to footnotes and references (just use the normal Markdown syntax <code>^[footnote]</code> and <code>[@citation]</code>), since they will be automatically put in the margin. A brief YAML example of the <code>tufte_html_book</code> format:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb86-1"><a href="3-1-html.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb86-2"><a href="3-1-html.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb86-3"><a href="3-1-html.html#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="at">  bookdown:</span><span class="fu">:tufte_html_book</span><span class="kw">:</span></span>
<span id="cb86-4"><a href="3-1-html.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb86-5"><a href="3-1-html.html#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span><span class="at"> toc.css</span></span>
<span id="cb86-6"><a href="3-1-html.html#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
</div>
<h3>参考文献</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-tufte" class="csl-entry">
Xie, Yihui, and JJ Allaire. 2020. <em>Tufte: Tufte’s Styles for r Markdown Documents</em>. <a href="https://github.com/rstudio/tufte">https://github.com/rstudio/tufte</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="9">
<li id="fn9"><p>To see more details on how an identifier is automatically generated, see the <code>auto_identifiers</code> extension in Pandoc’s documentation <a href="http://pandoc.org/MANUAL.html#header-identifiers" class="uri">http://pandoc.org/MANUAL.html#header-identifiers</a><a href="3-1-html.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>The backslash before <code>:</code> is due to a technical issue: we want to prevent Pandoc from translating the link to HTML code <code>&lt;a href="..."&gt;&lt;/a&gt;</code>. More details at <a href="https://github.com/jgm/pandoc/issues/2139" class="uri">https://github.com/jgm/pandoc/issues/2139</a>.<a href="3-1-html.html#fnref10" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<p style="text-align: center;">
<a href="3-output-formats.html"><button class="btn btn-default">Previous</button></a>
<a href="3-2-latexpdf.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
